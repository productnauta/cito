<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ title or "CITO Doutrina" }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  </head>
  <body>
    <div class="page">
      <header class="hero">
        <div class="brand">
          <span class="brand-mark">CITO</span>
          <span class="brand-sub">{{ brand_sub or "Doutrina" }}</span>
        </div>
        <nav class="hero-nav">
          <a href="{{ url_for('analise_citacoes') }}">Análise de Citações</a>
          <a href="{{ url_for('processos') }}">Processos</a>
          <a href="{{ url_for('ministros') }}">Análise de Ministros</a>
          <a href="{{ url_for('scraping') }}">Scraping</a>
        </nav>
        <p class="hero-copy">
          {{ hero_copy or "Painel de consulta e cruzamento de citacoes doutrinarias nos processos do STF." }}
        </p>
      </header>
      <main class="content">
        {% block content %}{% endblock %}
      </main>
      <footer class="footer">
        <span>poc-v-d33</span>
        <span>Flask + MongoDB</span>
      </footer>
    </div>
    <script>
      (function () {
        const cards = document.querySelectorAll("[data-filter-card]");
        if (!cards.length) return;

        cards.forEach((card) => {
          const toggle = card.querySelector("[data-filter-toggle]");
          const body = card.querySelector(".filter-panel__body");
          if (!toggle || !body) return;

          const setState = (collapsed) => {
            card.classList.toggle("is-collapsed", collapsed);
            toggle.setAttribute("aria-expanded", String(!collapsed));
            toggle.textContent = collapsed ? "Mostrar filtros" : "Recolher filtros";
          };

          setState(true);

          toggle.addEventListener("click", () => {
            const collapsed = !card.classList.contains("is-collapsed");
            setState(collapsed);
          });
        });
      })();
    </script>
  </body>
</html>
